---
layout: default
title: "The UNIX Time-Sharing System"
date: 1974-7-1
venue: "CACM (Communications of the ACM)"
url: ""
tags: [UNIX, Bell Laboratories, OS] 
summary: "UNIX is a general-purpose, multi-user, interactive
operating system for the Digital Equipment Corporation
PDP-11/40 and 11/45 computers. "
---

# The UNIX Time-Sharing System (1974) 

" That is, a file does not exist within a particular
directory; the directory entry for a file consists merely
of its name and a pointer to the information actually
describing the file. Thus a file exists independently of
any directory entry, although in practice a file is made
to disappear along with the last link to it.

" 링크가 허용되는 다른 시스템과 달리 UNIX는 파일에 대한 모든 링크가 동등한 상태를 갖는다는 점에서 다릅니다. 즉, 파일은 특정 디렉토리 내에 존재하지 않으며, 파일에 대한 디렉토리 항목은 단순히 파일의 이름과 파일을 실제로 설명하는 정보에 대한 포인터로 구성됩니다. 따라서 파일은 어떤 디렉토리 항목과도 독립적으로 존재하지만, 실제로는 파일에 대한 마지막 링크와 함께 사라지게 됩니다.

디렉토리의 역할: 디렉토리는 파일의 실제 내용을 담는 저장소가 아닙니다. 대신, 각 디렉토리는 파일 이름과 해당 파일의 실제 정보(메타데이터)를 가리키는 포인터(i-number)를 연결하는 목록의 역할을 합니다.
파일의 독립적인 존재: 이러한 구조 덕분에 파일 자체는 어떤 특정 디렉토리에 '속해' 있다고 보기 어렵습니다. 파일의 데이터와 속성은 디렉토리 항목과는 독립적으로 시스템 내에 존재합니다.
링크(Link)의 개념: 'Linking' 기능, 즉 하드 링크를 통해 동일한 파일이 여러 디렉토리에서 서로 다른 이름으로 참조될 수 있습니다. 각 디렉토리 항목은 이러한 링크 중 하나이며, 모든 링크는 파일에 대한 동등한 접근 권한을 가집니다.
파일의 소멸: 파일은 그것을 가리키는 마지막 링크(디렉토리 항목)가 삭제될 때 시스템에서 실제로 사라집니다. 즉, 파일이 더 이상 어떤 이름으로도 참조되지 않을 때, 해당 파일에 할당되었던 디스크 공간이 해제되고 파일 자체가 소멸됩니다.

# 이동식 파일 시스템

*   **이동식 파일 시스템의 개념**: UNIX는 전체 파일 시스템 계층 구조가 하나의 장치에만 존재할 필요가 없도록 설계되었습니다. 즉, 디스크 팩이나 다른 저장 장치와 같이 이동 가능한 매체에 저장된 파일 시스템을 주 파일 시스템에 통합할 수 있습니다.

*   **`mount` 시스템 호출**: 이 기능을 구현하기 위해 `mount` 시스템 호출이 사용됩니다. 이 호출은 두 가지 인자를 받습니다.
    *   첫 번째 인자는 이미 존재하는 일반 파일의 이름입니다.
    *   두 번째 인자는 접근 가능한 특수 파일(special file)의 이름으로, 이 특수 파일이 연결된 저장 볼륨이 독립적인 파일 시스템을 가지고 있어야 합니다.

*   **계층 구조의 확장**: `mount` 호출이 실행되면, 기존 파일 시스템 계층 구조에서 지정된 일반 파일(트리 구조의 '잎'에 해당)이 해당 이동식 볼륨의 루트 디렉토리로 대체됩니다. 결과적으로, 이동식 볼륨에 저장된 전체 디렉토리 계층 구조가 원래의 파일 시스템 트리에 새로운 하위 트리로 삽입되는 효과를 줍니다.

*   **일관된 접근**: 마운트된 후에는 이동식 볼륨의 파일과 영구 파일 시스템의 파일 사이에 거의 구별이 없어집니다. 사용자는 마치 모든 파일이 한 시스템에 있는 것처럼 편리하게 접근하고 사용할 수 있습니다.

*   **독립적인 파일 시스템 생성**: 이동식 파일 시스템은 해당 특수 파일에 데이터를 써서 생성하거나, 전용 유틸리티 프로그램을 사용하여 빈 파일 시스템을 만들거나 기존 파일 시스템을 복사하여 준비할 수 있습니다.

*   **주요 제약 사항**:
    *   **링크 제한**: 서로 다른 파일 시스템 계층 구조 간에는 링크(link)를 생성할 수 없습니다. 이 규칙은 여러 파일 시스템 간의 복잡한 관리를 피하고, 이동식 볼륨이 분리될 때 발생할 수 있는 문제를 방지하기 위해 존재합니다.
    *   **루트 디렉토리의 `..`**: 모든 파일 시스템(이동식이든 아니든)의 루트 디렉토리에서, `..` 항목은 관례적으로 부모 디렉토리를 가리키는 대신 자기 자신(루트 디렉토리 자체)을 가리킵니다. 이는 `mount`와 관련된 파일 시스템 구조를 단순화하는 데 기여할 수 있습니다.

---

💬 다른 파일 시스템 간에 링크를 생성할 수 없다는 제약 조건이 UNIX 파일 시스템의 복잡성을 어떻게 줄이고, 잠재적인 문제점을 어떻게 방지하는지 설명해주세요.

💬 `mount` 시스템 호출이 파일을 '대체'한다는 개념은 사용자와 시스템에 어떤 영향을 미치며, 이러한 동적인 파일 시스템 통합이 가지는 장단점은 무엇인가요?

💬 특수 파일(special file)을 사용하여 이동식 파일 시스템을 마운트하는 방식이 일반 파일 시스템과는 어떻게 다른지, 그리고 이러한 접근 방식이 가지는 기술적인 함의는 무엇인가요?

# 디스크 블록 할당 방식

*   **저장 공간 분할:** 디스크의 모든 저장 공간(고정 또는 이동식)은 512바이트 크기의 블록으로 나뉩니다. 이 블록들은 0부터 시작하는 논리적 주소를 가집니다.
*   **i-node의 역할:** 각 파일의 메타데이터를 담고 있는 `i-node`에는 파일의 실제 데이터가 저장된 디스크 블록의 주소를 담을 공간이 있습니다.
*   **작은 파일 (8개 이하 블록):**
    *   파일 크기가 8개 이하의 블록에 들어갈 경우, `i-node`는 이 데이터 블록들의 주소를 직접 저장합니다. 이를 **직접 주소 지정(direct addressing)** 방식이라고 합니다.
*   **큰 파일 (8개 초과 블록):**
    *   파일이 8개 이상의 블록을 필요로 하는 경우, `i-node`의 8개 주소 공간은 **간접 블록(indirect block)**을 가리키도록 사용됩니다.
    *   `i-node`의 각 주소 항목은 256개의 다른 블록 주소를 담고 있는 **간접 블록**을 가리킵니다.
    *   즉, `i-node`는 간접 블록의 주소를 저장하고, 그 간접 블록은 다시 실제 데이터 블록들의 주소를 저장하는 계층적인 구조를 가집니다.
*   **최대 파일 크기 계산:**
    *   `i-node`가 8개의 간접 블록을 가리킬 수 있고, 각 간접 블록이 256개의 데이터 블록 주소를 담을 수 있으며, 각 데이터 블록은 512바이트이므로,
    *   최대 파일 크기는 \(8 \times 256 \times 512\) 바이트입니다.
    *   이는 \(2,097,152\) 바이트 또는 \(2^{21}\) 바이트에 해당합니다. (주어진 텍스트에서는 8*256*512 = 1,048,576 (2^20) 바이트라고 명시되어 있으나, 실제 계산은 8 * 256 * 512 = 1,048,576 이 맞습니다. 텍스트의 8*256*512=1,048,576 (2^20) 바이트는 맞지만, 8개의 간접 블록으로 구성되는 것이 아니라, 8개의 주소 필드 중 첫 번째 필드가 간접 블록을 가리키고, 나머지 7개도 간접 블록을 가리킬 수 있다고 해석하는 것이 더 타당해 보입니다. 만약 8개의 주소 필드가 모두 간접 블록을 가리킨다면 8 * 256 * 512 = 1,048,576 바이트가 되고, 텍스트의 8.256.512 라는 표기는 8개의 간접 블록 주소가 있고, 각 간접 블록에 256개의 주소가 있다는 의미로 해석될 수 있습니다. Paper에서는 "each of the eight device addresses may point to an indirect block of 256 addresses of blocks"라고 했으므로, 8개의 주소 필드 모두가 간접 블록을 가리킬 수 있고, 각 간접 블록이 256개의 주소를 가진다는 의미로 해석됩니다. 따라서 최대 크기는 \(8 \times 256 \times 512\) 입니다. Paper에 2^20이라고 명시된 부분과 일치합니다.)

### Follow-up Questions
1.  💬 8개의 직접 주소와 간접 블록을 사용하는 방식이 파일 접근 속도에 어떤 영향을 미칠 것으로 예상되나요?
2.  💬 이 파일 시스템에서 큰 파일의 최대 크기가 1MB(2^20 바이트)로 제한되는 것이 현대적인 관점에서 어떤 의미를 가지나요?
3.  💬 특별 파일(special files)의 경우, i-node에 저장되는 8개의 장치 주소 필드가 일반 파일과 어떻게 다르게 사용되나요?
